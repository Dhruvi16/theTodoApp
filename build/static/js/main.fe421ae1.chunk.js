(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1045:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(35),c=a.n(l),r=(a(77),a(78),a(1050)),i=a(13),s=a(14),u=a(20),d=a(18),m=a(21),h=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}})}}]),t}(n.Component),v=a(59),f=a.n(v)()(),g=a(60),p=function(){function e(){Object(i.a)(this,e),this.auth0=new g.a.WebAuth({domain:"dev-evpssjfm.us.auth0.com",clientID:"L4KxOmvlyl0DfXmQEkzS0lL6D8lVx0wZ",redirectUri:"http://localhost:3000/callback",responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}return Object(s.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash(function(t,a){a&&a.accessToken&&a.idToken?(e.setSession(a),f.replace("/app")):t&&(f.replace("/app"),console.log(t),alert("Error: ".concat(t.error,". Check the console for further details.")))})}},{key:"setSession",value:function(e){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("sub",e.idTokenPayload.sub),localStorage.setItem("expires_at",t),f.replace("/app")}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),f.replace("/")}},{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),b=(a(50),a(27)),E=a(49),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(E.a,{className:"has-text-centered"},o.a.createElement(E.a.Body,null,o.a.createElement("h1",{class:"mb-3"},' Its a Todo app "React, Graphql, Hasura and Auth0"'),o.a.createElement(b.a,{class:"button is-primary mt-1",onClick:function(){return e.props.auth.login()}},"Login"))))}}]),t}(n.Component),y=a(70),S=a(19),w=a(61),j=a(33),O=a(28),C=a.n(O);function A(){var e=Object(j.a)(["\nmutation AddTodo($id: Int!) {\n    delete_todo(where:{id:{_eq:$id}}){\n        affected_rows\n      }\n  }\n"]);return A=function(){return e},e}function N(){var e=Object(j.a)(["\nmutation AddTodo($todo: String!, $location: String!, $date: String!, $time: String!, $canvas: String!) {\n  insert_todo(objects:[{todo:$todo, location:$location, date: $date, time: $time, canvas: $canvas}]){\n    returning{\n      id\n    }\n  }\n}\n"]);return N=function(){return e},e}function T(){var e=Object(j.a)([" \n  query { \n  todo(order_by: {id: asc}){\n    id\n    todo\n    location\n    time\n    date\n    done\n  }\n}\n"]);return T=function(){return e},e}function x(){var e=Object(j.a)(["\nmutation MarkDone($id: Int!) {\n    update_todo(\n        where: {id: {_eq: $id}},\n        _set: {\n          done: true,\n          \n        }\n      ) {\n        affected_rows\n        returning {\n          id\n          \n        }\n      }\n  }\n"]);return x=function(){return e},e}var _=C()(x()),I=C()(T()),$=C()(N()),D=C()(A()),M=function(e){return o.a.createElement(S.b,{mutation:D},function(t,a){return a.data,o.a.createElement("span",{"data-toggle":"tooltip",title:"Delete Todo",className:"float-right mt-n2 ml-1",onClick:function(a){t({variables:e,refetchQueries:[{query:I}]})}},o.a.createElement(b.a,{className:"button is-danger"},o.a.createElement(w.MdCancel,null)))})},L=a(1049),q=a(43),B=a.n(q),W=function(e){return o.a.createElement(S.b,{mutation:_},function(t,a){return a.data,o.a.createElement("span",{"data-toggle":"tooltip",title:"Mark done",className:"float-right mt-n2",onClick:function(a){t({variables:e,refetchQueries:[{query:I}]})}},o.a.createElement(b.a,{className:"button is-success"},o.a.createElement(B.a,null)))})},Q=function(){return o.a.createElement("div",{className:"collection-item"},o.a.createElement(S.c,{query:I},function(e){var t=e.loading,a=e.error,n=e.data;return t?"Loading...":a?console.log(a):n.todo.length?n.todo.map(function(e){var t=e.id,a=e.todo,n=e.location,l=e.time,c=e.date,r=e.done;return o.a.createElement(L.a,{key:t,color:r?"success":"warning"},o.a.createElement("span",{key:a.id}," '",a,"'--- Location: ",n," --- Time: ",l," ",c,"  ",o.a.createElement(M,{id:t})," ",o.a.createElement(W,{id:t})," "))}):o.a.createElement("div",null," ")}))},J=a(31),z=a(71),U=function(e){var t=e.children,a=e.closeModal,n=e.modalState,l=e.title;return n?o.a.createElement("div",{className:"modal is-active"},o.a.createElement("div",{className:"modal-background",onClick:a}),o.a.createElement("div",{className:"modal-card"},o.a.createElement("header",{className:"modal-card-head"},o.a.createElement("p",{className:"modal-card-title"},l),o.a.createElement("button",{className:"delete",onClick:a})),o.a.createElement("section",{className:"modal-card-body"},o.a.createElement("div",{className:"content"},t)))):null},H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({todo:e.target.value})},a.handleSubmit=function(e){a.state.todo&&(e({variables:{todo:a.state.todo,location:a.state.location,time:a.state.time,date:a.state.date,canvas:a.state.canvas},refetchQueries:[{query:I}]}),a.setState({todo:"",location:"",time:"",date:"",canvas:""}),a.toggleModal())},a.state={modalState:!1,todo:"",location:"",time:"",date:"",canvas:"",done:!1},a.toggleModal=a.toggleModal.bind(Object(J.a)(Object(J.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toggleModal",value:function(){this.setState(function(e,t){return{modalState:!e.modalState}})}},{key:"render",value:function(){var e=this;return o.a.createElement("section",{className:"section"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"has-text-centered content"},o.a.createElement("a",{className:"button is-primary",onClick:this.toggleModal},"Add Task")),o.a.createElement(U,{closeModal:this.toggleModal,modalState:this.state.modalState,title:"Add a task to do"},o.a.createElement(S.b,{mutation:$},function(t,a){a.data;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal"},o.a.createElement("div",{class:"modal-background"}),o.a.createElement("div",{class:"modal-content"},o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleSubmit(t)}},o.a.createElement("container",null,o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add a Task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"text",onChange:function(t){return e.setState({todo:t.target.value})},value:e.state.todo}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add a Location of Task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"text",onChange:function(t){return e.setState({location:t.target.value})},value:e.state.location}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add date for task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"date",onChange:function(t){return e.setState({date:t.target.value})},value:e.state.date}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add time for task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"time",onChange:function(t){return e.setState({time:t.target.value})},value:e.state.time}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add Canvas Element"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"text",onChange:function(t){return e.setState({canvas:t.target.value})},value:e.state.canvas}))),o.a.createElement("input",{class:"button is-danger",type:"submit"})))),o.a.createElement("button",{class:"modal-close is-large","aria-label":"close"})),o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleSubmit(t)}},o.a.createElement("container",null,o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add a Task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"text",onChange:function(t){return e.setState({todo:t.target.value})},value:e.state.todo}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add a Location of Task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"text",onChange:function(t){return e.setState({location:t.target.value})},value:e.state.location}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add date for task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"date",onChange:function(t){return e.setState({date:t.target.value})},value:e.state.date}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add time for task"),o.a.createElement("div",{class:"control"},o.a.createElement("input",{class:"input",type:"time",onChange:function(t){return e.setState({time:t.target.value})},value:e.state.time}))),o.a.createElement("div",{class:"field"},o.a.createElement("label",{class:"label"},"Add Canvas Element"),o.a.createElement("div",{class:"control"},o.a.createElement("button",{onClick:function(){localStorage.setItem("savedDrawing",e.saveableCanvas.getSaveData())},class:"button is-primary"},"Save"),o.a.createElement("button",{onClick:function(){e.saveableCanvas.clear()},class:"button is-danger"},"Clear"),o.a.createElement("button",{onClick:function(){e.saveableCanvas.undo()},class:"button is-danger"},"Undo"),o.a.createElement(z.a,{ref:function(t){return e.saveableCanvas=t}}))),o.a.createElement("input",{class:"button is-danger",type:"submit"}))))}))))}}]),t}(n.Component),R=(a(1043),localStorage.getItem("id_token")),G=new y.a({uri:"https://dhruvi-todo-app.herokuapp.com/v1/graphql",headers:{Authorization:"Bearer ".concat(R)}}),K=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return(0,this.props.auth.isAuthenticated)()&&o.a.createElement(S.a,{client:G},o.a.createElement("div",{className:"todo-app container"},o.a.createElement("h1",{className:"title has-text-centered mt-6"},"Todo's"),o.a.createElement(b.a,{onClick:function(){return window.open("logout","_self")},className:"button is-danger float-right"},"Logout"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(Q,{deleteTodo:this.deleteTodo}),o.a.createElement(H,{addTodo:this.addTodo})))}}]),t}(n.Component),P=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"Bye Bye........",this.props.auth.logout())}}]),t}(n.Component),V=new p,X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var F=o.a.createElement(r.b,{history:f},o.a.createElement("div",null,o.a.createElement(r.a,{exact:!0,path:"/app",render:function(e){return o.a.createElement(K,Object.assign({auth:V},e))}}),o.a.createElement(r.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(k,Object.assign({auth:V},e))}}),o.a.createElement(r.a,{exact:!0,path:"/logout",render:function(e){return o.a.createElement(P,Object.assign({auth:V},e))}}),o.a.createElement(r.a,{exact:!0,path:"/callback",render:function(e){return function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&V.handleAuthentication()}(e),o.a.createElement(h,e)}})));c.a.render(F,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");X?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Z(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Z(e)})}}()},50:function(e,t,a){},72:function(e,t,a){e.exports=a(1045)},77:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.fe421ae1.chunk.js.map